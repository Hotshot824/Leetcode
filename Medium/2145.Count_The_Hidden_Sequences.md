### [2145. Count the Hidden Sequences]

[2145. Count the Hidden Sequences]: https://leetcode.com/problems/count-the-hidden-sequences/

---

### Solution

這題是在一個 Low, Hight 的範圍內找出所有可能的 Hidden Sequence，而滿足的條件就是其中所有的數字都滿足題目給的 Differences。
Example: Low = 1, High = 5, Differences = [1, 1, -2]，那麼從 1 開始找會有

-   1, 2, 3, 1
-   2, 3, 4, 2
-   3, 4, 5, 3
-   4, 5, 6, 4 (Unsatisfy)

最後一個結果中的 6 超出了 Range，所以不算在內，所以一共會有 3 個 Hidden Sequence。

我們可以發現其實上面的 Hidden Sequence 是一個 Sliding Window 的概念，只要找到第一個 Hidden Sequence 後，
後面的 Sequence 就是第一個 Sequence 的向後平移，直到超出範圍為止。

因此我們只要找到這個 Differences 會帶來的最大差值與最小差值，然後求第一個數字帶入差值後是否會超出範圍，
如果不會超出範圍代表該段必然有解，這樣就不用真的去 Traverse 整個 Differences。

**Algorithm:**
1. Calculate the maxDiff, minDiff
2. Iterate through the range from lower to upper
3. If the first number + minDiff >= lower and the first number + maxDiff <= upper, then it is a valid sequence.
    -   count++
4. Return the count

Time Complexity O(N), Space Complexity O(1)。

**Golang Solution:**
```go
func numberOfArrays(differences []int, lower int, upper int) int {
    maxDiff, minDiff := 0, 0
    for diff, i := lower, 0; i < len(differences); i++ {
        diff += differences[i]
        maxDiff = max(maxDiff, lower - diff)
        minDiff = min(minDiff, lower - diff)
    }

    ret := 0
    for i := lower; i <= upper; i++ {
        if i+minDiff >= lower && i+maxDiff <= upper {
            ret++
        }
    }
    return ret
}
```